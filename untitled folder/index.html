<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Deadlock Prevention & Recovery Toolkit</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>

<header class="topbar">
  <h1>Deadlock Prevention & Recovery Toolkit</h1>
  <span class="tag">OS • CSE316 Project</span>
</header>

<p class="subtitle">Visualize Banker’s Algorithm, Deadlock Detection, and Resource Allocation Graphs in one place.</p>

<div class="container">

  <div class="card">
    <h2>Simulation Controls</h2>

    <div class="row">
      <label>Processes</label>
      <input id="p" type="number" value="3" />
      <label>Resources</label>
      <input id="r" type="number" value="3" />
    </div>

    <div class="btn-row">
      <button class="btn blue" onclick="buildMatrices()">Build Matrices</button>
      <button class="btn gray" onclick="randomize()">Randomize</button>
    </div>

    <div class="btn-row">
      <button class="btn green" onclick="runBanker()">Run Banker's Algorithm</button>
      <button class="btn orange" onclick="detectDeadlock()">Detect Deadlock (RAG)</button>
    </div>
  </div>

  <div class="card">
    <h2>Resource Allocation Graph (RAG)</h2>
    <p class="hint">Processes (P) on the left, Resources (R) on the right<br>Green = allocation, Pink = request</p>
    <svg id="rag" width="520" height="320"></svg>
  </div>

  <div class="card">
    <h2>System Matrices</h2>

    <div class="matrix-block">
      <h3>Allocation</h3>
      <div id="alloc" class="grid"></div>
    </div>

    <div class="matrix-block">
      <h3>Maximum</h3>
      <div id="max" class="grid"></div>
    </div>

    <div class="matrix-block">
      <h3>Available</h3>
      <div id="avail" class="grid"></div>
    </div>
  </div>

  <div class="card">
    <h2>Results & Logs</h2>

    <div class="result-box">
      <div>
        <b>Banker Result</b>
        <div id="result"></div>
      </div>
      <div>
        <b>Deadlock Detection</b>
        <div id="deadlock"></div>
      </div>
    </div>

    <div class="log" id="log"></div>
  </div>

  <div class="card">
    <h2>Toolkit Flow Diagram</h2>
    <div class="flow">
      <div>Input</div>
      <div>Deadlock Detection (RAG + Cycle Check)</div>
      <div>Prevention (Banker’s Algorithm)</div>
      <div>Recovery / Visualization</div>
    </div>
  </div>

</div>

<script src="script.js"></script>
</body>
</html>
